<Page
    x:Class="MyShop.App.Views.ShellPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:MyShop.App.Converters"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <converters:RoleToVisibilityConverter x:Key="RoleToVisibilityConverter" />
    </Page.Resources>

    <NavigationView x:Name="NavView" 
                    x:FieldModifier="public"
                    PaneDisplayMode="Left"
                    IsBackButtonVisible="Collapsed"
                    IsSettingsVisible="False"
                    OpenPaneLength="250"
                    Background="White">

        <NavigationView.Resources>
            <SolidColorBrush x:Key="NavigationViewItemForeground" Color="Black" />
            <SolidColorBrush x:Key="NavigationViewItemForegroundSelected" Color="White" />
            <SolidColorBrush x:Key="NavigationViewItemForegroundPointerOver" Color="Black" />
            <SolidColorBrush x:Key="NavigationViewItemForegroundSelectedPointerOver" Color="White" />
            <SolidColorBrush x:Key="NavigationViewItemBackgroundSelected" Color="#004060" />
            <SolidColorBrush x:Key="NavigationViewItemBackgroundPointerOver" Color="#F0F0F0" />
            <SolidColorBrush x:Key="NavigationViewItemBackgroundSelectedPointerOver" Color="#004060" />
        </NavigationView.Resources>

        <NavigationView.PaneHeader>
            <Grid Padding="20">
                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Spacing="10">
                    <Viewbox Width="40" Height="40">
                        <SymbolIcon Symbol="FourBars" Foreground="#004060"/>
                    </Viewbox>
                </StackPanel>
            </Grid>
        </NavigationView.PaneHeader>

        <NavigationView.MenuItems>
            <NavigationViewItem Content="DASHBOARD" Tag="Dashboard" Icon="ViewAll" FontWeight="SemiBold"/>

            <NavigationViewItem Content="ALL PRODUCTS" 
                                x:Name="AllProductsNavItem"
                                Tag="Products_0" 
                                Icon="Shop" 
                                FontWeight="SemiBold"/>

            <NavigationViewItemSeparator/>

            <NavigationViewItem Content="ORDER LIST" Tag="Orders" Icon="List" FontWeight="SemiBold"/>
            <NavigationViewItem Content="CUSTOMERS" Tag="Customers" Icon="People" FontWeight="SemiBold"/>
            <NavigationViewItem Content="REPORT" Tag="Reports" Icon="Document" FontWeight="SemiBold"/>
        </NavigationView.MenuItems>

        <NavigationView.Content>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Height="60" Background="White" Padding="20,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="20" VerticalAlignment="Center">
                        <Button Background="Transparent" BorderThickness="0">
                            <SymbolIcon Symbol="Find" Foreground="#0C2B4E"/>
                        </Button>
                        <Button Background="Transparent" BorderThickness="0">
                            <SymbolIcon Symbol="Message" Foreground="#0C2B4E"/>
                        </Button>

                        <Button Background="White" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10,5">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="{x:Bind ViewModel.UserRole, Mode=OneWay}" 
                                           FontWeight="Bold" 
                                           Foreground="#0C2B4E"
                                           VerticalAlignment="Center"/>
                                <FontIcon Glyph="&#xE70D;" FontSize="12" Foreground="#0C2B4E" VerticalAlignment="Center"/>
                            </StackPanel>
                            <Button.Flyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem Text="Profile" Icon="Contact"/>
                                    <MenuFlyoutItem Text="Admin Panel" Icon="Admin" 
                                                    Command="{x:Bind ViewModel.AdminPanelCommand}"
                                                    Visibility="{x:Bind ViewModel.UserRole, Mode=OneWay, Converter={StaticResource RoleToVisibilityConverter}, ConverterParameter='ADMIN'}"/>
                                    <MenuFlyoutSeparator />
                                    <MenuFlyoutItem Text="Logout" Icon="Cancel" Command="{x:Bind ViewModel.LogoutCommand}"/>
                                </MenuFlyout>
                            </Button.Flyout>
                        </Button>
                    </StackPanel>
                </Grid>

                <Frame x:Name="ContentFrame" Grid.Row="1" Background="#F5F5F5"/>
            </Grid>
        </NavigationView.Content>
    </NavigationView>
</Page>